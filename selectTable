#! /usr/bin/bash
read -p "enter a valid table name: " table
validation=$(. validName "$table")
if [[ -f $table ]]; then
 PS3="$table -->  "
select choice in all byColumnValue byColumnName "Back To Connect database"
do 
case $choice  in 
all)
cut -d " " -f 1  $table
echo all records have been selected successfully
;;
byColumnValue)
read -p "enter a valid column name: " column
validation1=$(. validName "$column")
order=$(awk -F : -v m=$column '{if(m==$1){print NR}}' "$table.meta")
if [[ $order -ne 0 ]]; then
read -p "enter a valid value: " value
selectedRows=$(awk -F : -v v=$value  -v o=$order '{if(v==$o){print NR}}' $table)
rowsNum=0
for i in $selectedRows;
do
rowsNum=$(($rowsNum+1))
sed -n "${i}p" $table
done
if [[ $rowsNum -eq 0 ]]; then
    echo 0 rows are selected
else
    echo "$rowsNum rows are selected"
fi
elif [[ $validation1 -eq 1 ]]; then
    echo "column name is invalid (No special charchters or white spaces)"
else
    echo "column not exists" 
fi
;;
byColumnName)
read -p "enter a valid column name: " column
validation1=$(. validName "$column")
order=$(awk -F : -v m=$column '{if(m==$1){print NR}}' "$table.meta")
if [[ $order -ne 0 ]]; then
cut -d : -f "$order"  $table
echo column has been projected successfully
elif [[ $validation1 -eq 1 ]]; then
    echo "column name is invalid (No special charchters or white spaces)"
else
    echo "column not exists" 
fi
;;
"Back To Connect database")

cd ../

. connectDB
;;
*)
echo enter a valid choice
;;
esac
done
elif [[ $validation -eq 1 ]]; then
    echo "table name is invalid (No special charchters or white spa3ces)"
else
    echo "table not exists"
fi
. connectDB





